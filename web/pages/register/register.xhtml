<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">



    <ui:define name="title">
        Register
    </ui:define>


    <ui:define name="content">


        <p:messages id="message" closable="true"/>
        <div class="ibox-content">
            <div class="row">
                <p:panel class="panel-default" id="reg" header="Register">
                    <div class="col-md-6">
                        <div class="form-group">
                            <p:outputLabel for="fname" value="First Name: "/>
                            <p:inputText id="fname" required="true" value="#{reg.fname}" class="form-control"></p:inputText>
                            <p:message for="fname"/>
                        </div>

                        <div class="form-group">
                            <p:outputLabel for="lname" value="Last Name: "/>
                            <p:inputText id="lname" required="true" value="#{reg.lname}" class="form-control"></p:inputText>
                            <p:message for="lname"/>
                        </div>

                        <div class="form-group">
                            <p:outputLabel for="uname" value="Phone Number: "/>
                            <p:inputText id="uname" class="form-control" value="#{reg.username}" maxlength="11" required="true"/>                                
                            <p:message for="uname"/>
                        </div>

                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <p:outputLabel for="email" value="Email Address: "/>
                            <p:inputText id="email" required="true" value="#{reg.emailadd}" class="form-control" label="email" size="40"
                                         requiredMessage="Please enter your email address."
                                         validatorMessage="Invalid email format"
                                         >

                                <f:validateRegex
                                    pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />

                            </p:inputText>
                            <p:message for="email"/>
                        </div>

                        <div class="form-group">
                            <p:outputLabel value="Password: " for="pWord"/>
                            <p:password id="pWord" required="true" value="#{reg.password}" match="RWord" class="form-control" label="Password" />
                            <p:message for="pWord"/>
                        </div>

                        <div class="form-group">
                            <p:outputLabel value="Re-type Password: " for="RWord"/>
                            <p:password id="RWord" required="true" value="#{reg.repassword}" class="form-control" label="Re-type Password"/>
                            <p:message for="RWord"/>
                        </div>
                        <div class="form-group">
                            <p:outputLabel value="Select Image: *" />
                            <p:fileUpload id="upload_pix_data" value="#{reg.passport_file}" auto="true"
                                          fileUploadListener="#{reg.handleFileUpload}" 
                                          mode="advanced" dragDropSupport="false"
                                          update="pst_img" sizeLimit="2097152" fileLimit="1" 
                                          allowTypes="/(\.|\/)(gif|jpe?g|png)$/"  />

                            <p:outputLabel value="Passport:"/>
                            <p:graphicImage id="pst_img" value="#{reg.passport_url}" />

                            <p:commandButton value="clear" ajax="false"
                                             actionListener="#{reg.clearPix}" 
                                             update="upload_pix_data,pst_img"/>                                                       
                        </div>


                    </div>
                    <p:commandButton class="btn btn-sm btn-primary m-t-n-xs" ajax="false" update="message"
                                     actionListener="#{reg.register}" process="@this fname,lname,uname,email,pWord,RWord,upload" value="Register"/>


                </p:panel>


            </div>
        </div>



    </ui:define>
    <ui:define name="footer">
        <div>
            <strong>Copyright</strong> GOT IT
        </div>
    </ui:define>

</ui:composition>